---
title: 记一次Vue小项目（二）—— 组件之间的通信
tags: 
      - Vue
      - 前端
---

记一次Vue小项目（二）—— 组件之间的通信
=================================

〇、楔子
-------------------------

- 上一回总结过vue中两大指令的理解后，就是对于其组件之间的传值了。由于vue的核心思想是封装性，所以各组件之间的作用域是独立的，而且通常情况下都是父组件传递数据给子组件使用，子组件触发父组件的事件，并传递给父组件所需要的参数。<!--more-->子组件对于父组件的只能说是请求并询问可否，子组件之间的则是可以相互传递而不存在父子组件之间通信的限制。

- （由于还未读过源码，所以这些理解都是基于现象的理解，希望以后读过源码之后能够理解的更加深刻）


一、父子组件之间的通信
--------------------------

- 有一篇文章我觉得写得特别好就厚颜无耻的引用一下好了：

### 父组件到子组件的通信

- “父子通讯中最常见的数据传递方式就是通过props传递数据，就好像方法的传参一样，父组件调用子组件并传入数据，子组件接受到父组件传递的数据进行验证使用。”  ——https://www.jianshu.com/p/649929d88699

- 就和前一篇总结写的一样，通过props传递的值必须先要在父组件中声明之后，子组件才能使用props接收这一参数。这就是父组件与子组件的通信方式。这些书上例子都有挺多的了就不再归纳了。

### 子组件到父组件的通信

- 父组件到子组件是如此的简单，那么子组件如何向父组件通信呢。答案就在于使用\$emit这个方法。相比于props传递function,它更加的直观和显示的表现出了调用关系。

- \$emit是使用在子组件中的向上传递通信的方法，\$emit( event, arg )中，arg（此参数可选）为要传递的值，而event则是组件中接收arg的方法，举个项目中的例子：
``` javascript
Counter () {
    let nextIndex = this.indexs+1; 
    this.$emit('update', nextIndex);
 },
```
- 这是我用来控制翻页的按钮组件中的一个Method，这个indexs是父组件通过props传给子组件的一个变量，然后我在父组件中用v-on声明了update方法，其绑定了父组件中一个Method。

- 由上述代码可以得知该例中，update是接收arg的方法，子组件中的nextIndex的值则是需要传递给父组件的arg。这样就可以将值传到父组件中并使用对应的Method和Watch进行处理。
 

二、子组件之间的通信
--------------------------

- 子组件之间的通信就稍微复杂一些，需要用到一个公共组件。
`let bus = new Vue();`

- 然后就要用\$on来进行传递，
- bus.$on('msg',function(msg){
//第一个参数是数据的名字，与发送时的名字对应，第二个参数是一个方法，要对数据的操作
//这里是对数据的操作
})

- 但是这个时候msg就要和想要传递的数据的名字要一致，也就是说\$emit(event, arg)中的event要与msg的值一致，因为在这里event是起到了一个标记的作用，值相等后就说明这两个方法是一对的，匹配的。这样子组件之间就能进行通信了。

三、小结
--------------------------

- 基本上这个一和二就是这个小项目中间遇到的一些问题的总结，其他一些方面由于涉及较浅所以并无太多问题与心得。以后遇到问题还是会写点东西接着上传博客记录一下。


<br>
上传于2018-10.04

